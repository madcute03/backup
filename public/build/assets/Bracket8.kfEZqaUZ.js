import{j as e}from"./app.6LWIl6Tz.js";import{d as t,f as s}from"./vendor.Dilc0e1Z.js";function n({eventId:n}){const a={R1A:{p1:{name:"TBD",score:""},p2:{name:"TBD",score:""},winner:null},R1B:{p1:{name:"TBD",score:""},p2:{name:"TBD",score:""},winner:null},R1C:{p1:{name:"TBD",score:""},p2:{name:"TBD",score:""},winner:null},R1D:{p1:{name:"TBD",score:""},p2:{name:"TBD",score:""},winner:null},SF1:{p1:{name:"TBD",score:""},p2:{name:"TBD",score:""},winner:null},SF2:{p1:{name:"TBD",score:""},p2:{name:"TBD",score:""},winner:null},GF:{p1:{name:"TBD",score:""},p2:{name:"TBD",score:""},winner:null}},[l,m]=t.useState(Array(8).fill("")),[r,c]=t.useState(a),[p,o]=t.useState(null),[i,x]=t.useState(!1),[d,u]=t.useState(!1),[h,b]=t.useState(null),[g,f]=t.useState({p1:"",p2:""}),j=t.useRef({}),[w,B]=t.useState([]);t.useEffect(()=>{n&&fetch(route("single-elimination.show",{event:n})).then(e=>e.json()).then(e=>{if(e.matches){c({...a,...e.matches}),o(e.champion||null);const t=[e.matches.R1A?.p1?.name||"",e.matches.R1A?.p2?.name||"",e.matches.R1B?.p1?.name||"",e.matches.R1B?.p2?.name||"",e.matches.R1C?.p1?.name||"",e.matches.R1C?.p2?.name||"",e.matches.R1D?.p1?.name||"",e.matches.R1D?.p2?.name||""];m(t)}}).catch(e=>{})},[n]);const R=(t,s)=>{const n=r[t];return n?e.jsxs("div",{id:t,ref:e=>j.current[t]=e,className:"p-1.5 border rounded-lg bg-gray-800 text-white mb-2 w-36 sm:w-40 md:w-44 relative",children:[e.jsx("p",{className:"font-bold mb-0.5 text-[10px] sm:text-xs",children:s}),["p1","p2"].map(t=>e.jsxs("div",{className:`flex justify-between items-center mb-0.5 text-[10px] sm:text-xs ${n.winner===n[t]?.name?"bg-green-600":"bg-gray-700"} px-1.5 py-1 sm:py-0.5 rounded`,children:[e.jsx("span",{children:n[t]?.name??"TBD"}),e.jsx("span",{className:"ml-2",children:n[t]?.score||"-"})]},t)),"TBD"!==n.p1?.name&&"TBD"!==n.p2?.name&&e.jsx("button",{onClick:()=>(e=>{b(e),f({p1:r[e].p1.score||"",p2:r[e].p2.score||""}),u(!0)})(t),className:"px-2 py-1.5 sm:px-1 sm:py-0.5 bg-blue-600 hover:bg-blue-500 rounded font-medium text-[10px] sm:text-[9px] w-full mt-1 sm:mt-0.5 transition-colors",children:"Report Score"}),n.winner&&"TBD"!==n.winner&&e.jsxs("p",{className:"text-green-400 text-[10px] mt-0.5",children:["🏆 ",n.winner]})]}):null};return t.useLayoutEffect(()=>{const e=document.getElementById("bracket-container");if(!e)return;const t=[["R1A","SF1"],["R1B","SF1"],["R1C","SF2"],["R1D","SF2"],["SF1","GF"],["SF2","GF"]].map(([t,s])=>{const n=j.current[t],a=j.current[s];if(!n||!a)return null;const l=n.getBoundingClientRect(),m=a.getBoundingClientRect(),r=e.getBoundingClientRect(),c=l.right-r.left,p=l.top+l.height/2-r.top,o=m.left-r.left;return`M${c},${p} H${c+30} V${m.top+m.height/2-r.top} H${o}`}).filter(Boolean);B(t)},[r]),e.jsx("div",{className:"bracket-root",children:e.jsxs("div",{className:"bg-gray-900 min-h-screen p-2 md:p-6 text-white w-full max-w-[1800px] mx-auto overflow-x-auto",children:[e.jsx("h1",{className:"text-xl font-bold text-center mb-4",children:"8-Team Single Elimination Bracket"}),e.jsxs("div",{className:"flex gap-2 sm:gap-4 justify-center mb-4 sm:mb-6 flex-wrap",children:[l.map((t,s)=>e.jsx("input",{type:"text",value:t,onChange:e=>((e,t)=>{const s=[...l];s[e]=t,m(s)})(s,e.target.value),placeholder:`Team ${s+1}`,className:"px-2 py-1 rounded text-black text-sm sm:text-base w-24 sm:w-auto"},s)),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto justify-center mt-2 sm:mt-0",children:[e.jsx("button",{onClick:()=>{const e={...a};e.R1A.p1.name=l[0]||"TBD",e.R1A.p2.name=l[1]||"TBD",e.R1B.p1.name=l[2]||"TBD",e.R1B.p2.name=l[3]||"TBD",e.R1C.p1.name=l[4]||"TBD",e.R1C.p2.name=l[5]||"TBD",e.R1D.p1.name=l[6]||"TBD",e.R1D.p2.name=l[7]||"TBD",c(e),o(null)},className:"px-3 sm:px-4 py-1 bg-blue-600 rounded text-white font-bold text-sm sm:text-base",children:"Apply Teams"}),e.jsx("button",{onClick:()=>{c(a),m(Array(8).fill("")),o(null)},className:"px-3 sm:px-4 py-1 bg-red-600 rounded text-white font-bold text-sm sm:text-base",children:"Reset"}),e.jsx("button",{onClick:()=>{n&&s.post(route("single-elimination.save"),{event_id:n,matches:r,champion:p},{preserveState:!0,onSuccess:()=>{x(!0),setTimeout(()=>x(!1),1500)}})},className:"px-3 sm:px-4 py-1 bg-green-600 rounded text-white font-bold text-sm sm:text-base",children:"Save Bracket"})]})]}),e.jsxs("div",{id:"bracket-container",className:"relative w-full",children:[e.jsx("svg",{className:"absolute top-0 left-0 w-full h-full pointer-events-none",children:w.map((t,s)=>e.jsx("path",{d:t,stroke:"white",strokeWidth:"2",fill:"none"},s))}),e.jsxs("div",{className:"flex flex-col md:flex-row md:gap-12 lg:gap-16 xl:gap-24 justify-center",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:gap-6",children:[R("R1A","Round 1"),R("R1B","Round 1"),R("R1C","Round 1"),R("R1D","Round 1")]}),e.jsxs("div",{className:"flex flex-col gap-16 sm:gap-20 md:gap-24 lg:gap-28 xl:gap-32 mt-8 sm:mt-12",children:[R("SF1","Semi-Final 1"),R("SF2","Semi-Final 2")]}),e.jsxs("div",{className:"mt-16 sm:mt-24",children:[R("GF","Grand Final"),p&&e.jsxs("h2",{className:"text-lg sm:text-xl md:text-2xl font-bold text-yellow-400 mt-2 sm:mt-3 text-center",children:["🏆 ",p," 🏆"]})]})]})]}),i&&e.jsx("div",{className:"fixed bottom-10 left-1/2 transform -translate-x-1/2 bg-green-600 px-4 py-2 rounded shadow-lg text-sm sm:text-base",children:"Bracket Saved!"}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-gray-800 p-4 sm:p-6 rounded-lg w-full max-w-md",children:[e.jsxs("h2",{className:"text-lg sm:text-xl font-bold mb-4",children:["Report Score (",h,")"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:r[h]?.p1?.name}),e.jsx("input",{type:"number",value:g.p1,onChange:e=>f({...g,p1:e.target.value}),className:"w-full px-3 py-1.5 rounded text-black text-sm sm:text-base",placeholder:"Score",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:r[h]?.p2?.name}),e.jsx("input",{type:"number",value:g.p2,onChange:e=>f({...g,p2:e.target.value}),className:"w-full px-3 py-1.5 rounded text-black text-sm sm:text-base",placeholder:"Score",min:"0"})]}),e.jsxs("div",{className:"flex justify-end gap-2 sm:gap-3 mt-4",children:[e.jsx("button",{onClick:()=>u(!1),className:"px-3 sm:px-4 py-1.5 bg-gray-600 hover:bg-gray-500 rounded text-white text-sm sm:text-base font-medium",children:"Cancel"}),e.jsx("button",{onClick:()=>{if(!h)return;const e={...r},t=e[h];if(t.p1.score=g.p1,t.p2.score=g.p2,"TBD"!==t.p1.name&&"TBD"!==t.p2.name&&t.p1.score!==t.p2.score){const s=t[parseInt(t.p1.score)>parseInt(t.p2.score)?"p1":"p2"].name;switch(t.winner=s,h){case"R1A":e.SF1.p1.name=s;break;case"R1B":e.SF1.p2.name=s;break;case"R1C":e.SF2.p1.name=s;break;case"R1D":e.SF2.p2.name=s;break;case"SF1":e.GF.p1.name=s;break;case"SF2":e.GF.p2.name=s;break;case"GF":o(s)}}c(e),u(!1)},className:"px-3 sm:px-4 py-1.5 bg-blue-600 hover:bg-blue-500 rounded text-white text-sm sm:text-base font-medium",children:"Submit"})]})]})]})})]})})}export{n as default};

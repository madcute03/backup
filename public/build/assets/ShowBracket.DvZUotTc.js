import{j as e}from"./app.6LWIl6Tz.js";import{d as n,H as t}from"./vendor.Dilc0e1Z.js";import{P as s}from"./PublicLayout.CrDxCOP8.js";function r({eventId:r,refreshTrigger:l}){const a=n.useRef({}),[c,i]=n.useState([]),[o,m]=n.useState(null),d={UB1:{p1:{name:"TBD",score:0},p2:{name:"TBD",score:0},winner:null},UB2:{p1:{name:"TBD",score:0},p2:{name:"TBD",score:0},winner:null},UB3:{p1:{name:"TBD",score:0},p2:{name:"TBD",score:0},winner:null},UB4:{p1:{name:"TBD",score:0},p2:{name:"TBD",score:0},winner:null},LB1:{p1:{name:"TBD",score:0},p2:{name:"TBD",score:0},winner:null},LB2:{p1:{name:"TBD",score:0},p2:{name:"TBD",score:0},winner:null},LB3:{p1:{name:"TBD",score:0},p2:{name:"TBD",score:0},winner:null},GF:{p1:{name:"TBD",score:0},p2:{name:"TBD",score:0},winner:null}},[h,p]=n.useState(d);n.useEffect(()=>{r&&fetch(route("double-elimination.show",{event:r})).then(e=>e.json()).then(e=>{e&&e.matches&&Object.keys(e.matches).length?(p(e.matches),m(e.champion)):(p(d),m(null))}).catch(e=>{})},[r,l]);const B=n=>{const t=h[n];return e.jsxs("div",{id:n,ref:e=>a.current[n]=e,className:"p-3 border rounded-lg bg-gray-800 text-white mb-6 w-44 relative",children:[e.jsx("p",{className:"font-bold mb-1",children:n}),["p1","p2"].map(n=>e.jsxs("div",{className:"flex justify-between items-center w-full px-2 py-1 mb-1 rounded text-left "+(t.winner===t[n].name?"bg-green-600":"bg-gray-700"),children:[e.jsx("span",{children:t[n].name}),e.jsx("span",{className:"ml-2 px-2 py-1 bg-gray-900 rounded border border-white w-8 text-center",children:t[n].score})]},n))]})};return n.useLayoutEffect(()=>{requestAnimationFrame(()=>{const e=document.getElementById("bracket-container");if(!e||!h)return;const n=[];[["UB1","UB3"],["UB2","UB4"],["UB3","UB4"],["UB4","GF"],["LB1","LB2"],["LB2","LB3"],["LB3","GF"]].forEach(([t,s])=>{const r=a.current[t],l=a.current[s];if(r&&l){const t=r.getBoundingClientRect(),s=l.getBoundingClientRect(),a=e.getBoundingClientRect(),c=t.right-a.left,i=t.top+t.height/2-a.top,o=s.left-a.left,m=`M${c},${i} H${c+20} V${s.top+s.height/2-a.top} H${o}`;n.push(m)}}),i(n)})},[h]),e.jsx(s,{children:e.jsxs("div",{className:"bg-gray-900 min-h-screen p-6 text-white",children:[e.jsx(t,{title:"5-Team Bracket Results"}),e.jsx("h1",{className:"text-2xl font-bold text-center mb-6",children:"5-Team Double Elimination Bracket"}),e.jsxs("div",{id:"bracket-container",className:"relative",children:[e.jsx("svg",{className:"absolute top-0 left-0 w-full h-full pointer-events-none",children:c.map((n,t)=>e.jsx("path",{d:n,stroke:"white",strokeWidth:"2",fill:"none"},t))}),e.jsx("h2",{className:"font-bold mb-2",children:"Upper Bracket"}),e.jsxs("div",{className:"flex gap-12 mb-10",children:[e.jsx("div",{children:B("UB1")}),e.jsxs("div",{children:[B("UB2"),B("UB3")]}),e.jsx("div",{children:B("UB4")})]}),e.jsx("h2",{className:"font-bold mb-2",children:"Lower Bracket"}),e.jsxs("div",{className:"flex gap-12 mb-10",children:[e.jsx("div",{children:B("LB1")}),e.jsx("div",{children:B("LB2")}),e.jsx("div",{children:B("LB3")})]}),e.jsxs("div",{className:"flex flex-col justify-center items-center absolute left-1/2 top-1/2 -translate-y-1/2 -translate-x-1/2",children:[e.jsx("h2",{className:"font-bold mb-2 text-center",children:"Grand Final"}),B("GF")]})]}),o&&e.jsxs("div",{className:"text-center mt-10 text-yellow-400 text-3xl font-bold",children:["üèÜ Champion: ",o]})]})})}export{r as default};

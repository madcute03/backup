import{j as e}from"./app.6LWIl6Tz.js";import{u as t,d as a,H as l,L as r,f as s}from"./vendor.Dilc0e1Z.js";function n({event:n,requiredPlayers:i}){const{data:d,setData:o,post:u,errors:m,reset:p}=t({team_name:"",players:Array.from({length:i},()=>({student_id:"",name:"",email:"",department:"",age:"",player_image:null,whiteform_image:null}))});a.useEffect(()=>{o("players",Array.from({length:i},()=>({student_id:"",name:"",email:"",department:"",age:"",player_image:null,whiteform_image:null})))},[i]);const c=(e,t,a)=>{const l=[...d.players];l[e][t]=a,o("players",l)};return e.jsxs(e.Fragment,{children:[e.jsx(l,{title:`Register: ${n.title}`}),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-blue-950 to-black text-slate-100 py-10 px-4",children:e.jsxs("div",{className:"mx-auto w-full max-w-3xl overflow-hidden rounded-xl shadow-2xl border border-white/15 bg-white/10 backdrop-blur-xl p-6 sm:p-8",children:[e.jsxs("h1",{className:"text-2xl font-semibold text-center",children:["Register for ",n.title]}),e.jsx("p",{className:"text-lg text-slate-300 text-center",children:"Fill in participant details"}),e.jsxs("form",{onSubmit:e=>{e.preventDefault();for(let a=0;a<d.players.length;a++){if(!d.players[a].email.trim().endsWith("@cdd.edu.ph"))return void alert(`Player ${a+1}: Email must end with @cdd.edu.ph`)}const t=new FormData;i>1&&t.append("team_name",d.team_name),d.players.forEach((e,a)=>{t.append(`players[${a}][student_id]`,e.student_id),t.append(`players[${a}][name]`,e.name),t.append(`players[${a}][email]`,e.email),t.append(`players[${a}][department]`,e.department),t.append(`players[${a}][age]`,e.age),t.append(`players[${a}][player_image]`,e.player_image),t.append(`players[${a}][whiteform_image]`,e.whiteform_image)}),u(route("eventregistrations.store",n.id),t,{forceFormData:!0,onSuccess:()=>{s.visit(route("events.show",n.id),{only:["event"],data:{success:"Registration successful!"},onFinish:()=>p()})},onError:e=>{}})},className:"mt-4 space-y-6",encType:"multipart/form-data",children:[i>1&&e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-slate-200",children:"Team Name *"}),e.jsx("input",{type:"text",value:d.team_name,onChange:e=>o("team_name",e.target.value),className:"w-full bg-white/10 border border-white/20 text-slate-100 placeholder-slate-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500/40",required:!0}),m.team_name&&e.jsx("p",{className:"text-red-300 text-sm mt-1",children:m.team_name})]}),d.players.map((t,a)=>e.jsxs("div",{className:"border border-white/20 rounded p-4 space-y-3 bg-white/5",children:[e.jsxs("h2",{className:"font-bold",children:["Player ",a+1]}),e.jsx("input",{type:"text",placeholder:"Student ID",value:t.student_id,onChange:e=>c(a,"student_id",e.target.value),className:"w-full bg-white/10 border border-white/20 text-slate-100 placeholder-slate-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500/40",pattern:"[0-9\\-]+",title:"Only numbers and dashes allowed, e.g., 2025-001",required:!0}),e.jsx("input",{type:"text",placeholder:"Name",value:t.name,onChange:e=>c(a,"name",e.target.value),className:"w-full bg-white/10 border border-white/20 text-slate-100 placeholder-slate-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500/40",required:!0}),e.jsx("input",{type:"email",placeholder:"Email (must end with @cdd.edu.ph)",value:t.email,onChange:e=>c(a,"email",e.target.value),className:"w-full bg-white/10 border border-white/20 text-slate-100 placeholder-slate-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500/40",pattern:"^[a-zA-Z0-9._%+-]+@cdd\\.edu\\.ph$",title:"Email must be a valid @cdd.edu.ph address",required:!0}),e.jsx("input",{type:"text",placeholder:"Department",value:t.department,onChange:e=>c(a,"department",e.target.value),className:"w-full bg-white/10 border border-white/20 text-slate-100 placeholder-slate-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500/40",required:!0}),e.jsx("input",{type:"number",placeholder:"Age",value:t.age,onChange:e=>c(a,"age",e.target.value),className:"w-full bg-white/10 border border-white/20 text-slate-100 placeholder-slate-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500/40",required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-slate-200",children:"Player Image *"}),e.jsx("input",{type:"file",accept:"image/*",onChange:e=>c(a,"player_image",e.target.files[0]),className:"w-full text-slate-100",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-slate-200",children:"Whiteform Image *"}),e.jsx("input",{type:"file",accept:"image/*",onChange:e=>c(a,"whiteform_image",e.target.files[0]),className:"w-full text-slate-100",required:!0})]})]},a)),e.jsx("button",{type:"submit",className:"w-full justify-center bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded transition",children:"Submit Registration"})]}),e.jsx(r,{href:route("home"),className:"mt-6 inline-block text-blue-300 hover:text-blue-200 hover:underline",children:"‚Üê Back to Events"})]})})]})}export{n as default};
